{"ast":null,"code":"var _jsxFileName = \"G:\\\\FRONT-END\\\\2nd YEAR\\\\Semester2\\\\4 Project Exam2\\\\project-exam-2-daliasir\\\\src\\\\components\\\\signin\\\\SigninForm.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useContext } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useForm } from \"react-hook-form\";\nimport * as yup from \"yup\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport axios from \"axios\";\nimport FormError from \"../common/FormError\";\nimport { BASE_URL, TOKEN_PATH } from \"../../constants/api\";\nimport AuthContext from \"../../context/AuthContext\";\nimport Form from \"react-bootstrap/Form\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst url = BASE_URL + TOKEN_PATH;\nconst validationSchema = yup.object().shape({\n  username: yup.string().required(\"Please enter your username\"),\n  password: yup.string().required(\"Please enter your password\")\n});\nexport default function SigninForm() {\n  _s();\n\n  const [submitting, setSubmitting] = useState(false);\n  const [signinError, setSigninError] = useState(null);\n  const navigate = useNavigate();\n  const {\n    register,\n    handleSubmit,\n    formState: {\n      errors\n    }\n  } = useForm({\n    resolver: yupResolver(validationSchema)\n  });\n  const [, setAuth] = useContext(AuthContext);\n\n  async function onSubmit(data) {\n    setSubmitting(true);\n    setSigninError(null);\n    console.log(data);\n\n    try {\n      const response = await axios.post(url, data);\n      console.log(\"response\", response.data);\n      setAuth(response.data);\n      navigate(\"/\");\n    } catch (error) {\n      console.log(\"error\", error);\n      setSigninError(\"Username or password is incorrect. Please try again.\");\n    } finally {\n      setSubmitting(false);\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(Form, {\n    onSubmit: handleSubmit(onSubmit),\n    className: \"signin-form\",\n    children: [signinError && /*#__PURE__*/_jsxDEV(FormError, {\n      children: signinError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 23\n    }, this), /*#__PURE__*/_jsxDEV(\"fieldset\", {\n      disabled: submitting,\n      children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n          children: \"Username\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", { ...register(\"username\"),\n          className: \"form-control\",\n          placeholder: \"Your username\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this), errors.username && /*#__PURE__*/_jsxDEV(FormError, {\n          children: errors.username.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 31\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", { ...register(\"password\"),\n          className: \"form-control\",\n          placeholder: \"Your password\",\n          type: \"password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this), errors.password && /*#__PURE__*/_jsxDEV(FormError, {\n          children: errors.password.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 31\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-primary\",\n        children: submitting ? \"Signing in...\" : \"Signin\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n}\n\n_s(SigninForm, \"Sht3ndQ4eraB6n96upZiaY9BGj4=\", false, function () {\n  return [useNavigate, useForm];\n});\n\n_c = SigninForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"SigninForm\");","map":{"version":3,"sources":["G:/FRONT-END/2nd YEAR/Semester2/4 Project Exam2/project-exam-2-daliasir/src/components/signin/SigninForm.js"],"names":["useState","useContext","useNavigate","useForm","yup","yupResolver","axios","FormError","BASE_URL","TOKEN_PATH","AuthContext","Form","url","validationSchema","object","shape","username","string","required","password","SigninForm","submitting","setSubmitting","signinError","setSigninError","navigate","register","handleSubmit","formState","errors","resolver","setAuth","onSubmit","data","console","log","response","post","error","message"],"mappings":"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","sourcesContent":["import { useState, useContext } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport * as yup from \"yup\";\r\nimport { yupResolver } from \"@hookform/resolvers/yup\";\r\nimport axios from \"axios\";\r\nimport FormError from \"../common/FormError\";\r\nimport { BASE_URL, TOKEN_PATH } from \"../../constants/api\";\r\nimport AuthContext from \"../../context/AuthContext\";\r\nimport Form from \"react-bootstrap/Form\";\r\n\r\nconst url = BASE_URL + TOKEN_PATH;\r\n\r\nconst validationSchema = yup.object().shape({\r\n  username: yup.string().required(\"Please enter your username\"),\r\n  password: yup.string().required(\"Please enter your password\"),\r\n});\r\n\r\nexport default function SigninForm() {\r\n  const [submitting, setSubmitting] = useState(false);\r\n  const [signinError, setSigninError] = useState(null);\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const { register, handleSubmit, formState: { errors } } = useForm({\r\n    resolver: yupResolver(validationSchema),\r\n  });\r\n\r\n\r\n  const [, setAuth] = useContext(AuthContext);\r\n\r\n  async function onSubmit(data) {\r\n    setSubmitting(true);\r\n    setSigninError(null);\r\n\r\n    console.log(data);\r\n\r\n    try {\r\n      const response = await axios.post(url, data);\r\n      console.log(\"response\", response.data);\r\n      setAuth(response.data);\r\n      navigate(\"/\");\r\n    } catch (error) {\r\n      console.log(\"error\", error);\r\n      setSigninError(\"Username or password is incorrect. Please try again.\");\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Form onSubmit={handleSubmit(onSubmit)} className=\"signin-form\">\r\n      {signinError && <FormError>{signinError}</FormError>}\r\n      <fieldset disabled={submitting}>\r\n        <Form.Group className=\"mb-3\" >\r\n          <Form.Label>Username</Form.Label>\r\n          <input {...register(\"username\")} className=\"form-control\" placeholder=\"Your username\" />\r\n          {errors.username && <FormError>{errors.username.message}</FormError>}\r\n        </Form.Group>\r\n        <Form.Group className=\"mb-3\" >\r\n          <Form.Label>Password</Form.Label>\r\n          <input {...register(\"password\")} className=\"form-control\" placeholder=\"Your password\" type=\"password\" />\r\n          {errors.password && <FormError>{errors.password.message}</FormError>}\r\n        </Form.Group>\r\n        <button type=\"submit\" className=\"btn btn-primary\" >{submitting ? \"Signing in...\" : \"Signin\"}</button>\r\n      </fieldset>\r\n    </Form>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}