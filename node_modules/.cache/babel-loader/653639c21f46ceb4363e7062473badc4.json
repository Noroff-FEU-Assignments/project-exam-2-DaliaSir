{"ast":null,"code":"var _jsxFileName = \"G:\\\\FRONT-END\\\\2nd YEAR\\\\Semester2\\\\4 Project Exam2\\\\project-exam-2-daliasir\\\\src\\\\components\\\\signin\\\\SigninForm.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useContext } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useForm } from \"react-hook-form\";\nimport * as yup from \"yup\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport axios from \"axios\";\nimport FormError from \"../common/FormError\";\nimport { BASE_URL, TOKEN_PATH } from \"../../constants/api\";\nimport AuthContext from \"../../context/AuthContext\";\nimport Form from \"react-bootstrap/Form\";\nimport Container from \"react-bootstrap/Container\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst url = BASE_URL + TOKEN_PATH;\nconst validationSchema = yup.object().shape({\n  username: yup.string().required(\"Please enter your username\"),\n  password: yup.string().required(\"Please enter your password\")\n});\nexport default function SigninForm() {\n  _s();\n\n  const [submitting, setSubmitting] = useState(false);\n  const [signinError, setSigninError] = useState(null);\n  const [, setAuth] = useContext(AuthContext);\n  const navigate = useNavigate();\n  const {\n    register,\n    handleSubmit,\n    formState: {\n      errors\n    }\n  } = useForm({\n    resolver: yupResolver(validationSchema)\n  });\n\n  async function onSubmit(data) {\n    setSubmitting(true);\n    setSigninError(null); //console.log(data);\n\n    try {\n      const response = await axios.post(url, {\n        identifier: data.username.toLowerCase(),\n        password: data.password\n      });\n      console.log(\"response\", response.data);\n      setAuth(response.data);\n      navigate(\"/\");\n    } catch (error) {\n      console.log(\"error\", error);\n      setSigninError(\"Username or password is incorrect. Please try again.\");\n    } finally {\n      setSubmitting(false);\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    className: \"signin-container__form\",\n    children: /*#__PURE__*/_jsxDEV(Form, {\n      onSubmit: handleSubmit(onSubmit),\n      children: [signinError && /*#__PURE__*/_jsxDEV(FormError, {\n        children: signinError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"fieldset\", {\n        disabled: submitting,\n        children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n          className: \"mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"Username\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", { ...register(\"username\"),\n            className: \"form-control\",\n            placeholder: \"Your username\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 13\n          }, this), errors.username && /*#__PURE__*/_jsxDEV(FormError, {\n            children: errors.username.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          className: \"mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", { ...register(\"password\"),\n            className: \"form-control\",\n            placeholder: \"Your password\",\n            type: \"password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 13\n          }, this), errors.password && /*#__PURE__*/_jsxDEV(FormError, {\n            children: errors.password.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-primary\",\n          children: submitting ? \"Signing in...\" : \"Sign in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n}\n\n_s(SigninForm, \"ysDgWrDKtoL2PC6H8a8RAYXlbOI=\", false, function () {\n  return [useNavigate, useForm];\n});\n\n_c = SigninForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"SigninForm\");","map":{"version":3,"sources":["G:/FRONT-END/2nd YEAR/Semester2/4 Project Exam2/project-exam-2-daliasir/src/components/signin/SigninForm.js"],"names":["useState","useContext","useNavigate","useForm","yup","yupResolver","axios","FormError","BASE_URL","TOKEN_PATH","AuthContext","Form","Container","url","validationSchema","object","shape","username","string","required","password","SigninForm","submitting","setSubmitting","signinError","setSigninError","setAuth","navigate","register","handleSubmit","formState","errors","resolver","onSubmit","data","response","post","identifier","toLowerCase","console","log","error","message"],"mappings":"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","sourcesContent":["import { useState, useContext } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport * as yup from \"yup\";\r\nimport { yupResolver } from \"@hookform/resolvers/yup\";\r\nimport axios from \"axios\";\r\nimport FormError from \"../common/FormError\";\r\nimport { BASE_URL, TOKEN_PATH } from \"../../constants/api\";\r\nimport AuthContext from \"../../context/AuthContext\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport Container from \"react-bootstrap/Container\";\r\n\r\nconst url = BASE_URL + TOKEN_PATH;\r\n\r\nconst validationSchema = yup.object().shape({\r\n  username: yup.string().required(\"Please enter your username\"),\r\n  password: yup.string().required(\"Please enter your password\"),\r\n});\r\n\r\nexport default function SigninForm() {\r\n  const [submitting, setSubmitting] = useState(false);\r\n  const [signinError, setSigninError] = useState(null);\r\n  const [, setAuth] = useContext(AuthContext);\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const { register, handleSubmit, formState: { errors } } = useForm({\r\n    resolver: yupResolver(validationSchema),\r\n  });\r\n\r\n  async function onSubmit(data) {\r\n    setSubmitting(true);\r\n    setSigninError(null);\r\n\r\n    //console.log(data);\r\n\r\n    try {\r\n      const response = await axios.post(url, {\r\n        identifier: data.username.toLowerCase(),\r\n        password: data.password,\r\n      });\r\n      console.log(\"response\", response.data);\r\n      setAuth(response.data);\r\n      navigate(\"/\");\r\n    } catch (error) {\r\n      console.log(\"error\", error);\r\n      setSigninError(\"Username or password is incorrect. Please try again.\");\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Container className=\"signin-container__form\">\r\n      <Form onSubmit={handleSubmit(onSubmit)} >\r\n        {signinError && <FormError>{signinError}</FormError>}\r\n        <fieldset disabled={submitting}>\r\n          <Form.Group className=\"mb-3\" >\r\n            <Form.Label>Username</Form.Label>\r\n            <input {...register(\"username\")} className=\"form-control\" placeholder=\"Your username\" />\r\n            {errors.username && <FormError>{errors.username.message}</FormError>}\r\n          </Form.Group>\r\n          <Form.Group className=\"mb-3\" >\r\n            <Form.Label>Password</Form.Label>\r\n            <input {...register(\"password\")} className=\"form-control\" placeholder=\"Your password\" type=\"password\" />\r\n            {errors.password && <FormError>{errors.password.message}</FormError>}\r\n          </Form.Group>\r\n          <button type=\"submit\" className=\"btn btn-primary\" >{submitting ? \"Signing in...\" : \"Sign in\"}</button>\r\n        </fieldset>\r\n      </Form>\r\n    </Container>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}